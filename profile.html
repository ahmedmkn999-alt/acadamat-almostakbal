<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</title>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
<script type="module" src="devcheck.js"></script>
<script src="auth.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;900&family=Orbitron:wght@700&display=swap" rel="stylesheet">

<style>
    body {
        font-family: 'Cairo', sans-serif;
        background: radial-gradient(circle at center, #1e3a8a 0%, #020617 100%);
        color: white;
        height: 100vh;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        margin: 0;
    }

    .profile-card {
        background: rgba(15, 23, 42, 0.8);
        padding: 40px;
        border-radius: 25px;
        border: 2px solid #3b82f6;
        box-shadow: 0 0 50px rgba(59, 130, 246, 0.3);
        text-align: center;
        width: 90%; max-width: 400px;
        position: relative;
    }

    .avatar {
        width: 100px; height: 100px;
        background: #0f172a;
        border: 4px solid #fbbf24; /* Ø°Ù‡Ø¨ÙŠ */
        border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        font-size: 3rem; margin: 0 auto 20px;
        box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
    }

    h2 { margin: 0; font-size: 1.8rem; color: #fbbf24; text-shadow: 0 0 10px rgba(251, 191, 36, 0.5); }
    p { color: #94a3b8; margin-bottom: 20px; font-weight: bold; }

    .status-badge {
        background: rgba(59, 130, 246, 0.2);
        color: #60a5fa;
        padding: 5px 15px; border-radius: 20px;
        border: 1px solid #3b82f6;
        display: inline-block; margin-bottom: 30px;
    }

    .back-btn {
        background: linear-gradient(90deg, #3b82f6, #2563eb);
        color: white; border: none; padding: 12px 30px;
        border-radius: 12px; font-size: 1rem; font-weight: bold;
        cursor: pointer; transition: 0.3s; width: 100%;
    }
    .back-btn:hover { transform: translateY(-3px); box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4); }

    .watermark {
        position: absolute; top: 20px; right: 20px;
        font-family: 'Orbitron'; font-size: 0.8rem; color: rgba(255,255,255,0.3);
    }
</style>
</head>
<body>

    <div class="watermark">FULL MARK</div>

    <div class="profile-card">
        <div class="avatar">ğŸ‘‘</div>
        <h2 id="pName">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</h2>
        <p id="pSection">...</p>
        
        <div class="status-badge">âœ¨ Ø§Ø´ØªØ±Ø§Ùƒ Ù…Ù…ÙŠØ²</div>
        
        <div style="text-align: right; margin-bottom: 20px; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px;">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <span style="color:#94a3b8">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙØ¹ÙŠÙ„:</span>
                <span id="pDate" style="color:white; font-weight:bold">...</span>
            </div>
            <div style="display:flex; justify-content:space-between;">
                <span style="color:#94a3b8">Ø§Ù„ÙƒÙˆØ¯:</span>
                <span id="pCode" style="color:#fbbf24; font-family:monospace; font-size:1.1rem">...</span>
            </div>
        </div>

        <button class="back-btn" onclick="window.location.href='subjects.html'">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙˆØ§Ø¯</button>
    </div>

    <script>
        const firebaseConfig = { /* Ù†ÙØ³ Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© */ 
            apiKey: "AIzaSyBK6FZF3LW83qaUHBKYTfiVd2Ozrd1Rf2g",
            authDomain: "thanawy-1383.firebaseapp.com",
            databaseURL: "https://thanawy-1383-default-rtdb.firebaseio.com",
            projectId: "thanawy-1383",
            storageBucket: "thanawy-1383.firebasestorage.app",
            messagingSenderId: "1026664406457",
            appId: "1:1026664406457:web:87d71f7e41bef36ba0aa68"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const code = localStorage.getItem('activeCode');
        if(code) {
            document.getElementById('pCode').innerText = code;
            db.ref('approvedStudents/' + code).once('value').then(snap => {
                const d = snap.val();
                if(d) {
                    document.getElementById('pName').innerText = d.studentName;
                    document.getElementById('pSection').innerText = d.section;
                    document.getElementById('pDate').innerText = new Date(d.activationDate || Date.now()).toLocaleDateString('ar-EG');
                }
            });
        }
    </script>
</body>
  </html>
  
