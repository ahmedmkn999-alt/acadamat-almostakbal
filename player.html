<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>مشاهدة</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>body { background: black; color: white; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }</style>
</head>
<body>
    <button onclick="history.back()" class="absolute top-5 right-5 z-50 bg-white/10 hover:bg-white/30 w-10 h-10 rounded-full flex items-center justify-center text-white backdrop-blur-md transition">✕</button>
    
    <div id="container" class="w-full h-full flex items-center justify-center">
        <p class="text-gray-500 animate-pulse">جاري التحميل...</p>
    </div>

    <script>
        const v = JSON.parse(localStorage.getItem('currentVideo'));
        const box = document.getElementById('container');

        if(v) {
            let url = v.stream_url || v.link || v.url || v.video_url;
            if(url.includes('youtube') && !url.includes('embed')) url = url.replace('watch?v=', 'embed/');
            box.innerHTML = `<iframe src="${url}" class="w-full h-full border-0" allowfullscreen allow="autoplay"></iframe>`;
        } else {
            box.innerHTML = '<p class="text-red-500">فشل تحميل الفيديو</p>';
        }
    </script>
</body>
</html>
