<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Admin</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="auth.js"></script>
    <style>
        body { background: #020617; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif; }
        div { background: #1e293b; padding: 40px; border-radius: 20px; text-align: center; width: 300px; border: 1px solid #334155; }
        input, select, button { width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: none; }
        button { background: #3b82f6; color: white; cursor: pointer; font-weight: bold; }
        #res { color: #4ade80; display: none; margin-top: 10px; font-weight: bold; font-size: 1.2rem; }
    </style>
</head>
<body>
    <div>
        <h2 style="color:#fbbf24; margin-bottom:20px;">إنشاء كود</h2>
        <input id="n" placeholder="اسم الطالب">
        <select id="s">
            <option>علمي علوم</option><option>علمي رياضة</option><option>أدبي</option><option>أزهر</option>
        </select>
        <button onclick="gen()">إنشاء</button>
        <div id="res"></div>
    </div>
    <script>
        const db = firebase.database();
        function gen() {
            const n = document.getElementById('n').value;
            const s = document.getElementById('s').value;
            if(!n) return alert('الاسم مطلوب');
            const c = Math.floor(100000 + Math.random() * 900000).toString();
            db.ref('approvedStudents/'+c).set({
                studentName: n, section: s, expiry: Date.now() + (30*86400000), 
                deviceId: null, isBlocked: false
            }).then(() => {
                document.getElementById('res').style.display='block';
                document.getElementById('res').innerText = c;
            });
        }
    </script>
</body>
</html>
