<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Admin</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <style>
        body { background: #020617; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif; margin: 0; }
        .container { background: #1e293b; padding: 40px; border-radius: 20px; text-align: center; width: 90%; max-width: 350px; border: 1px solid #334155; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
        h2 { color: #fbbf24; margin-bottom: 20px; font-size: 1.5rem; }
        input, select { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #475569; background: #0f172a; color: white; outline: none; }
        button { width: 100%; padding: 12px; margin-top: 10px; border-radius: 8px; border: none; background: #3b82f6; color: white; cursor: pointer; font-weight: bold; font-size: 1rem; transition: 0.3s; }
        button:hover { background: #2563eb; }
        #res { color: #4ade80; display: none; margin-top: 15px; font-weight: bold; font-size: 1.4rem; background: #064e3b; padding: 10px; border-radius: 8px; border: 1px dashed #4ade80; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ğŸ” Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
        <input id="n" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ">
        <select id="s">
            <option value="Ø¹Ù„Ù…ÙŠ Ø¹Ù„ÙˆÙ…">ğŸ§¬ Ø¹Ù„Ù…ÙŠ Ø¹Ù„ÙˆÙ…</option>
            <option value="Ø¹Ù„Ù…ÙŠ Ø±ÙŠØ§Ø¶Ø©">ğŸ“ Ø¹Ù„Ù…ÙŠ Ø±ÙŠØ§Ø¶Ø©</option>
            <option value="Ø£Ø¯Ø¨ÙŠ">ğŸ“œ Ø£Ø¯Ø¨ÙŠ</option>
            <option value="Ø£Ø²Ù‡Ø±">ğŸ•Œ Ø£Ø²Ù‡Ø±</option>
        </select>
        <button onclick="gen()">âœ¨ Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ø¬Ø¯ÙŠØ¯</button>
        <div id="res"></div>
    </div>

    <script>
        // ÙƒÙˆØ¯ Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¨ØªØ§Ø¹Ùƒ
        const firebaseConfig = {
            apiKey: "AIzaSyD1QB3qaFfkGYq0OWOEAr83V25NAPFwxzs",
            authDomain: "fullmark-2025.firebaseapp.com",
            databaseURL: "https://fullmark-2025-default-rtdb.firebaseio.com",
            projectId: "fullmark-2025",
            storageBucket: "fullmark-2025.firebasestorage.app",
            messagingSenderId: "963956202032",
            appId: "1:963956202032:web:4df914457d79b75dee2bf5"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function gen() {
            const n = document.getElementById('n').value;
            const s = document.getElementById('s').value;
            if(!n) return alert('âš ï¸ ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨!');

            const c = Math.floor(100000 + Math.random() * 900000).toString();
            
            // Ø§Ù„ÙƒÙˆØ¯ ØµØ§Ù„Ø­ Ù„Ù…Ø¯Ø© 30 ÙŠÙˆÙ…
            db.ref('approvedStudents/'+c).set({
                studentName: n, 
                section: s, 
                expiry: Date.now() + (30*86400000), 
                deviceId: null, 
                isBlocked: false,
                createdAt: Date.now()
            }).then(() => {
                const r = document.getElementById('res');
                r.style.display='block';
                r.innerText = c;
                
                // ØªÙØ±ÙŠØº Ø®Ø§Ù†Ø© Ø§Ù„Ø§Ø³Ù… Ø¹Ø´Ø§Ù† Ù„Ùˆ Ù‡ØªØ¹Ù…Ù„ ÙƒÙˆØ¯ ØªØ§Ù†ÙŠ
                document.getElementById('n').value = '';
            }).catch(error => {
                alert("Ø­Ø¯Ø« Ø®Ø·Ø£: " + error.message);
            });
        }
    </script>
</body>
</html>
